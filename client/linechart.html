<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>Client-side Tests</title>
        <script src="../dist/flocc.js"></script>
        <script>
            for (let key in flocc) {
                console.log(key);
                window[key] = flocc[key];
            }
        </script>
    </head>
    <body>
        <div id="container-ascii"></div>
        <div id="container-canvas"></div>
        <script>
            (function() {
                const environment = new GridEnvironment(5, 5);
                const renderer = new ASCIIRenderer(environment);
                renderer.mount("#container-ascii");
                const chart = new LineChartRenderer(environment);
                chart.setMetrics("a", "b", "c");

                function setup() {
                    environment.fill();
                    environment.getAgents().map(agent => {
                        agent.set("value", "-");
                    });
                }

                function draw() {
                    const center = environment.getAgentAt(4, 4);
                    center.set("value", "o");
                    environment.neighbors(center, 1, true).map(agent => {
                        agent.set("value", "x");
                    });
                    environment.tick();
                }

                setup();
                draw();
            })();

            (function() {
                const environment = new GridEnvironment(5, 5);
                const renderer = new CanvasRenderer(environment, {
                    width: 200,
                    height: 300
                });
                renderer.mount("#container-canvas");

                function setup() {
                    environment.fill();
                    environment.getAgents().map(agent => {
                        agent.set("color", "yellow");
                    });
                }

                function draw() {
                    const center = environment.getAgentAt(4, 4);
                    center.set("color", "red");
                    environment.neighbors(center, 1, true).map(agent => {
                        agent.set("color", "rgb(130, 60, 90)");
                        agent.set("value", "c");
                    });
                    environment.tick();
                }

                setup();
                draw();
            })();
        </script>
    </body>
</html>
