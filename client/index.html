<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>Client-side Tests</title>
        <script src="../dist/flocc.js"></script>
        <script>
            for (let key in flocc) {
                window[key] = flocc[key];
            }
        </script>
    </head>
    <body>
        <div id="canvas"></div>
        <div id="line"></div>
        <script>
            (function() {
                const environment = new Environment();
                // const renderer = new CanvasRenderer(environment);
                // renderer.mount("#canvas");

                const chart = new LineChartRenderer(environment);
                chart.mount("#line");
                chart.metric("x", "red");
                chart.metric("y", "blue");

                function meander(agent) {
                    agent.increment("x", Math.random() > 0.5 ? 1 : -1);
                    agent.increment("y", Math.random() > 0.5 ? 1 : -1);
                }

                function setup() {
                    for (let i = 0; i < 5; i++) {
                        const agent = new Agent();
                        agent.set("x", utils.random(0, 20));
                        agent.set("y", utils.random(0, 100));
                        agent.addRule(meander);
                        environment.addAgent(agent);
                    }
                }

                function draw() {
                    environment.tick();
                    window.requestAnimationFrame(draw);
                }

                setup();
                draw();
            })();
        </script>
    </body>
</html>
