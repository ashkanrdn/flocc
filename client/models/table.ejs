<div id="table"></div>

<script>
  const environment = new Environment();

  const renderer = new TableRenderer(environment);
  renderer.columns = ["i", "x"];
  renderer.mount("#table");

  function tick(agent) {
    let { x } = agent.getData();
    x++;
    if (x > 10) x -= 10;
    return { x };
  }

  (function setup() {
    for (let i = 0; i < 3; i++) {
      const a = new Agent({
        i,
        x: (i * 81) % 7
      });
      a.addRule(tick);
      environment.addAgent(a);
    }
  })();

  (function run() {
    environment.tick();
    window.requestAnimationFrame(run);
  })();
</script>
